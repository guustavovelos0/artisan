# Ralph Progress Log - Artisan App
# Branch: ralph/artisan-management-app
# Started: 2026-01-16
# =========================================

## Codebase Patterns
- Package naming: @artisan/api, @artisan/web, @artisan/shared
- Root dev script uses concurrently to run api and web together
- TypeScript is used across all packages
- API runs on port 3001, Web runs on port 5173
- PostgreSQL runs on port 5433 (Docker) to avoid local PostgreSQL conflicts
- Prisma 7: Use `env("DATABASE_URL")` in prisma.config.ts, NOT `process.env` or schema.prisma url
- Prisma 7 Runtime: MUST use @prisma/adapter-pg with PrismaPg adapter for PrismaClient initialization
- TailwindCSS v4 uses CSS-based config (no tailwind.config.js), import via `@import "tailwindcss"` in CSS
- Shadcn/ui: Uses @/* path alias, components at src/components/ui/, utils at src/lib/utils.ts
- Auth: JWT_SECRET from env or default, bcrypt with 10 salt rounds, 7d token expiry
- Auth middleware: Use AuthenticatedRequest interface to extend Express Request with userId property
---

## 2026-01-16 - US-001
- What was implemented: Monorepo structure with npm workspaces
- Files changed:
  - package.json (root with workspaces config)
  - apps/api/package.json, tsconfig.json, src/index.ts
  - apps/web/package.json, tsconfig.json, src/index.ts
  - packages/shared/package.json, tsconfig.json, src/index.ts
  - .gitignore
- **Learnings for future iterations:**
  - Workspace packages reference each other via "*" in dependencies (e.g., "@artisan/shared": "*")
  - API package needs @types/node for console.log to typecheck
  - Root typecheck runs all workspace typechecks with `npm run typecheck --workspaces --if-present`
---

## 2026-01-16 - US-002
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: Docker Compose configuration for PostgreSQL 15
- Files changed:
  - docker-compose.yml (new file at root)
- **Learnings for future iterations:**
  - Docker Compose uses named volume `postgres_data` for data persistence
  - Database credentials: artisan_db / artisan / artisan123
  - Includes healthcheck for reliable startup detection
  - Container name: artisan_postgres
---

## 2026-01-16 - US-003
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: Express server with TypeScript and hot reload
- Files changed:
  - apps/api/package.json (added express, cors, ts-node-dev dependencies)
  - apps/api/src/index.ts (Express server with CORS and health endpoint)
- **Learnings for future iterations:**
  - Express 5.x is the current version (installed 5.2.1)
  - ts-node-dev with --respawn --transpile-only provides fast hot reload
  - CORS configured to allow requests from localhost:5173 (frontend)
  - Health check endpoint at GET /api/health returns { status: 'ok' }
  - Use underscore prefix for unused params (_req) to avoid TypeScript errors
---

## 2026-01-16 - US-004
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: Prisma ORM with complete database schema and migrations
- Files changed:
  - apps/api/prisma/schema.prisma (complete schema with all models and relations)
  - apps/api/prisma.config.ts (fixed to use env() helper for DATABASE_URL)
  - apps/api/prisma/migrations/20260116111156_init/migration.sql (initial migration)
  - apps/api/.env.example (updated with port 5433 documentation)
  - docker-compose.yml (changed port to 5433 to avoid local PostgreSQL conflict)
- **Learnings for future iterations:**
  - Prisma 7 requires prisma.config.ts for database URL configuration
  - Use `env("DATABASE_URL")` from `prisma/config` instead of `process.env`
  - The `url` property is no longer supported in schema.prisma datasource block
  - Docker port 5433 is used externally to avoid conflicts with local PostgreSQL on port 5432
  - Run `npm run db:generate` then `npm run db:migrate -- --name init` to create migrations
  - Generated Prisma client goes to node_modules/@prisma/client
---

## 2026-01-16 - US-005
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: Frontend with Vite, React 18, and TypeScript
- Files changed:
  - apps/web/package.json (replaced placeholder with Vite/React config)
  - apps/web/tsconfig.json (configured for React/Vite bundler mode)
  - apps/web/vite.config.ts (Vite config with React plugin, port 5173)
  - apps/web/index.html (Vite entry HTML)
  - apps/web/src/main.tsx (React root with StrictMode)
  - apps/web/src/App.tsx (BrowserRouter with basic Dashboard route)
  - apps/web/src/index.css (basic styling)
  - apps/web/src/vite-env.d.ts (Vite type definitions)
  - apps/web/public/vite.svg (favicon)
  - .gitignore (added *.tsbuildinfo)
- **Learnings for future iterations:**
  - Vite 6.x is the current version for React projects
  - React Router v6 uses BrowserRouter, Routes, and Route components
  - tsconfig uses `"jsx": "react-jsx"` for React 18
  - Vite config uses `@vitejs/plugin-react` for React support
  - Frontend dev server runs on port 5173 by default (configured in vite.config.ts)
  - Use `tsc -b --noEmit` for typecheck in Vite projects (uses project references)
---

## 2026-01-16 - US-006
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: TailwindCSS v4 and Shadcn/ui configuration
- Files changed:
  - apps/web/package.json (added tailwindcss, @tailwindcss/vite, and shadcn dependencies)
  - apps/web/vite.config.ts (added tailwindcss plugin and @/* path alias)
  - apps/web/tsconfig.json (added baseUrl and paths for @/* alias)
  - apps/web/src/index.css (TailwindCSS v4 directives and CSS variables for themes)
  - apps/web/components.json (Shadcn/ui configuration)
  - apps/web/src/lib/utils.ts (cn utility for class merging)
  - apps/web/src/components/ui/button.tsx (Shadcn Button component)
  - apps/web/src/components/ui/input.tsx (Shadcn Input component)
  - apps/web/src/components/ui/card.tsx (Shadcn Card component)
  - apps/web/src/components/ui/dialog.tsx (Shadcn Dialog component)
  - apps/web/src/components/ui/table.tsx (Shadcn Table component)
  - apps/web/src/components/ui/select.tsx (Shadcn Select component)
  - apps/web/src/components/ui/form.tsx (Shadcn Form component)
  - apps/web/src/components/ui/label.tsx (Shadcn Label component)
  - apps/web/src/App.tsx (updated with sample Shadcn components for verification)
- **Learnings for future iterations:**
  - TailwindCSS v4 is CSS-first configuration (no tailwind.config.js needed)
  - Use `@import "tailwindcss"` instead of `@tailwind base/components/utilities` directives
  - Shadcn/ui requires path alias (@/*) configured in both tsconfig.json and vite.config.ts
  - Use `npx shadcn@latest init -d` for default configuration
  - Add components with `npx shadcn@latest add button input card dialog table select form -y`
  - Theme variables are defined in CSS using oklch color space (CSS Color Level 4)
  - Light/dark theme support via CSS custom properties and `.dark` class
---

## 2026-01-16 - US-007
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: User registration endpoint with validation and JWT
- Files changed:
  - apps/api/package.json (added bcrypt, jsonwebtoken, @prisma/adapter-pg dependencies)
  - apps/api/src/index.ts (added auth routes)
  - apps/api/src/routes/auth.ts (POST /api/auth/register endpoint)
  - apps/api/src/lib/prisma.ts (centralized Prisma client with PG adapter)
- **Learnings for future iterations:**
  - Prisma 7 requires @prisma/adapter-pg with PrismaPg for runtime database connections
  - PrismaClient must be initialized with: `new PrismaClient({ adapter: new PrismaPg({ connectionString }) })`
  - Import dotenv/config at the top of lib/prisma.ts to load environment variables
  - bcrypt.hash() with 10 salt rounds for password hashing
  - jwt.sign() with { expiresIn: '7d' } for 7-day token expiry
  - Use destructuring to exclude password: `const { password: _, ...userWithoutPassword } = user`
  - Email validation regex: `/^[^\s@]+@[^\s@]+\.[^\s@]+$/`
---

## 2026-01-16 - US-008
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: Login endpoint with password verification
- Files changed:
  - apps/api/src/routes/auth.ts (added POST /api/auth/login endpoint)
- **Learnings for future iterations:**
  - Use bcrypt.compare(plainPassword, hashedPassword) to verify passwords
  - Return generic "Invalid credentials" message for both wrong email and wrong password (security)
  - jwt.sign() with { expiresIn: '7d' } creates a token that expires in 7 days
---

## 2026-01-16 - US-009
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: Auth middleware and profile endpoints
- Files changed:
  - apps/api/src/middleware/auth.ts (new file - auth middleware)
  - apps/api/src/routes/auth.ts (added GET /api/auth/me and PUT /api/auth/profile endpoints)
- **Learnings for future iterations:**
  - Auth middleware extends Express Request with AuthenticatedRequest interface
  - JWT token is extracted from "Bearer <token>" format in Authorization header
  - Use jwt.verify() to decode and validate token, catching JsonWebTokenError and TokenExpiredError
  - Middleware adds userId to request object for use in protected route handlers
  - Profile update endpoint allows partial updates using undefined checks
---

## 2026-01-16 - US-010
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: Login and registration pages with form validation
- Files verified (already existed from previous iteration):
  - apps/web/src/pages/LoginPage.tsx (/login page with email and password fields)
  - apps/web/src/pages/RegisterPage.tsx (/register page with name, email, password, businessName fields)
  - apps/web/src/contexts/AuthContext.tsx (auth state management)
  - apps/web/src/lib/api.ts (API client with automatic token injection)
  - apps/web/src/components/ProtectedRoute.tsx (route protection)
  - apps/web/src/App.tsx (routes configuration)
- **Learnings for future iterations:**
  - Forms use react-hook-form with zod resolver for validation
  - Shadcn Form component integrates with react-hook-form using FormField, FormControl, FormItem
  - Login page preserves intended destination via location.state.from for redirect after auth
  - API errors are handled via ApiError class with status code and message
  - Both pages show error messages from API responses in a styled error box
  - Token and user data stored in localStorage, validated on app init via /auth/me endpoint
---

## 2026-01-16 - US-011
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: Auth context, protected routes, and API client (already existed from previous iteration)
- Files verified:
  - apps/web/src/contexts/AuthContext.tsx (AuthContext with user state, login, logout, register functions)
  - apps/web/src/components/ProtectedRoute.tsx (redirects to /login if not authenticated)
  - apps/web/src/lib/api.ts (API client with automatic token injection)
- **Learnings for future iterations:**
  - AuthContext uses useEffect to check token validity on init via /auth/me endpoint
  - isLoading state prevents flash of login page while checking auth status
  - ProtectedRoute shows spinner while isLoading is true
  - API client uses class pattern with private getToken() method for automatic token injection
---

## 2026-01-16 - US-012
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: App layout with sidebar navigation (already existed from previous iteration)
- Files verified:
  - apps/web/src/components/Layout.tsx (Layout component with sidebar navigation)
- **Learnings for future iterations:**
  - Uses Shadcn Sheet component for mobile sidebar (slides in from left)
  - NavItems defined as array of { title, href, icon } for easy maintenance
  - Active nav item detection uses pathname matching with startsWith for nested routes
  - Desktop sidebar is fixed position (md:fixed md:inset-y-0), main content has md:pl-64 offset
  - Mobile hamburger menu uses SheetTrigger inside header
  - User name displayed in header with hidden sm:inline for mobile responsiveness
  - lucide-react icons used: LayoutDashboard, Users, Package, Boxes, FileText, Settings, Menu, LogOut
---

## 2026-01-16 - US-013 to US-022 (Batch Verification)
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was verified: Multiple backend and frontend features (all already implemented in previous iterations)
- US-013: Categories CRUD endpoints - apps/api/src/routes/categories.ts
- US-014: Clients CRUD endpoints - apps/api/src/routes/clients.ts
- US-015: Clients list page - apps/web/src/pages/ClientsPage.tsx
- US-016: Client form page - apps/web/src/pages/ClientFormPage.tsx
- US-017: Materials CRUD endpoints - apps/api/src/routes/materials.ts
- US-018: Materials list page - apps/web/src/pages/MaterialsPage.tsx
- US-019: Material form page - apps/web/src/pages/MaterialFormPage.tsx
- US-020: Products CRUD endpoints - apps/api/src/routes/products.ts
- US-021: Products list page - apps/web/src/pages/ProductsPage.tsx
- US-022: Product form page - apps/web/src/pages/ProductFormPage.tsx
- **Learnings for future iterations:**
  - All CRUD endpoints follow same pattern: router.use(authMiddleware), then GET /, GET /:id, POST /, PUT /:id, DELETE /:id
  - Pagination pattern: page/limit query params, returns { items, pagination: { page, limit, total, totalPages } }
  - Form pages use react-hook-form with zod resolver, same pattern as Login/Register
  - List pages use loading/error states with Loader2 spinner and retry button
  - Low stock indicator: isLowStock(item) checks item.quantity < item.minStock
  - Currency formatting uses Intl.NumberFormat with pt-BR locale and BRL currency
  - Category dropdowns filter by type (MATERIAL or PRODUCT) when fetching
  - Toast notifications use sonner library via toast.success()
---

## 2026-01-16 - US-023
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: Technical sheet endpoints for managing product materials
- Files changed:
  - apps/api/src/routes/products.ts (added 5 new endpoints for technical sheet)
- New endpoints:
  - GET /api/products/:id/materials - list product materials with quantities
  - POST /api/products/:id/materials - add material to product
  - PUT /api/products/:id/materials/:materialId - update material quantity
  - DELETE /api/products/:id/materials/:materialId - remove material from product
  - GET /api/products/:id/cost - calculate total cost (materialCost + laborCost)
- **Learnings for future iterations:**
  - Use Prisma's unique compound key syntax: `where: { productId_materialId: { productId, materialId } }`
  - Cost calculation returns materialBreakdown array with individual material costs
  - All endpoints verify product belongs to user via userId filter
  - POST checks if material already exists in product to prevent duplicates
  - Material validation ensures materialId belongs to the same user
---

## 2026-01-16 - US-024
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: Verified technical sheet page functionality (already implemented in prior iteration)
- Files verified:
  - apps/web/src/pages/TechnicalSheetPage.tsx (complete technical sheet UI)
  - apps/web/src/App.tsx (route already configured at /products/:id/technical-sheet)
  - apps/web/src/pages/ProductsPage.tsx (Technical Sheet button already links to page)
- Features verified in browser:
  - Add material dropdown with available materials (filters out already added)
  - Materials table with columns: Material, Unit, Quantity, Unit Price, Total
  - Editable quantity field (updates on blur or Enter key)
  - Remove button per material with confirmation dialog
  - Cost Summary showing: Material Cost, Labor Cost, Total Cost
  - Toast notifications for success/error states
- **Learnings for future iterations:**
  - TechnicalSheetPage uses Promise.all for parallel fetching of product, materials, and cost
  - editingQuantity state tracks in-progress quantity edits before committing
  - materialsNotInSheet filters available materials to exclude already added ones
  - Cost endpoint returns materialBreakdown which frontend uses for display
---

## 2026-01-16 - US-025
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: Verified manufacture endpoint (already implemented in prior iteration)
- Files verified:
  - apps/api/src/routes/products.ts (lines 596-761: POST /api/products/:id/manufacture endpoint)
- API testing confirmed:
  - Successful manufacture: Deducts materials from stock, increments product quantity
  - Insufficient materials: Returns 400 with insufficientMaterials array containing materialId, materialName, required, available, shortage, unit
  - Low stock warnings: Returns warnings array when materials go below minStock after manufacture
  - Validation: Quantity must be positive number, product must have materials defined
  - Transaction: Uses Prisma $transaction for atomic stock updates
- **Learnings for future iterations:**
  - Manufacture endpoint uses Prisma $transaction to ensure atomic updates (materials deducted and product incremented together)
  - InsufficientMaterial interface includes shortage calculation for easier display
  - LowStockWarning interface shows both currentStock and minStock for comparison
  - Check for empty technical sheet before attempting manufacture (prevents manufacturing products without defined materials)
---

## 2026-01-16 - US-026
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: Verified manufacture dialog (already implemented in prior iteration)
- Files verified:
  - apps/web/src/components/ManufactureDialog.tsx (complete dialog component)
  - apps/web/src/pages/ProductsPage.tsx (Manufacture button integration at lines 100-103, 204-212, 237-242)
- Browser testing confirmed:
  - Manufacture button opens dialog correctly
  - Quantity input works (spinbutton)
  - Materials table shows Required/Available/Status columns
  - Low stock warning displays when materials will go below minStock
  - Insufficient stock error shows with disabled Manufacture button
  - Successful manufacture: toast shows "Successfully manufactured X unit(s)", product list updates quantity
  - Low stock warning toast also appears after successful manufacture if applicable
- **Learnings for future iterations:**
  - ManufactureDialog uses client-side stock checking (checkStockLevels) for real-time UI updates
  - Dialog fetches product with materials on open, resets state on close
  - canManufacture computed property controls button disabled state
  - Toast notifications from sonner library: toast.success(), toast.warning(), toast.error()
  - onSuccess callback triggers fetchProducts() in parent to refresh the list
---


## 2026-01-16 - US-027
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: Verified quotes CRUD endpoints (already implemented in prior iteration)
- Files verified:
  - apps/api/src/routes/quotes.ts (complete quotes CRUD with all endpoints)
  - apps/api/src/index.ts (quotes routes already registered)
- API testing confirmed:
  - GET /api/quotes - returns paginated quotes with client info and status filter
  - GET /api/quotes/:id - returns single quote with all items
  - POST /api/quotes - creates quote with items, auto-increments number per user
  - PUT /api/quotes/:id - updates quote and recalculates totals
  - PUT /api/quotes/:id/status - updates quote status (DRAFT, SENT, APPROVED, REJECTED, COMPLETED)
  - DELETE /api/quotes/:id - deletes quote and cascades items
- **Learnings for future iterations:**
  - Quote number auto-increment uses findFirst with orderBy desc to get last number
  - calculateTotals helper: subtotal from items, total = subtotal + laborCost - discount (or manualTotal if set)
  - Status filter: GET /api/quotes?status=SENT filters by QuoteStatus enum
  - All endpoints validate ownership via userId from auth middleware
  - Items can reference productId for traceability, or be manual entries (productId null)
  - Prisma $transaction used for PUT /:id to delete old items before creating new ones
---

## 2026-01-16 - US-028
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: Verified quotes list page (already implemented in prior iteration)
- Files verified:
  - apps/web/src/pages/QuotesPage.tsx (complete quotes list page)
  - apps/web/src/App.tsx (route already configured at /quotes)
- Browser testing confirmed:
  - Table with columns: Number, Client, Date, Status, Total, Actions
  - Status badges with colors: Draft (gray), Sent (blue), Approved (green), Rejected (red), Completed (purple)
  - Status filter dropdown with all options: All Statuses, Draft, Sent, Approved, Rejected, Completed
  - New Quote button links to /quotes/new
  - Edit and Delete action buttons per row
- **Learnings for future iterations:**
  - QuotesPage uses useSearchParams for status filter state persistence in URL
  - STATUS_BADGE_STYLES maps QuoteStatus to Tailwind color classes
  - Currency formatting uses pt-BR locale with BRL currency
  - Date formatting uses pt-BR locale with day/month/year format
---

## 2026-01-16 - US-029, US-030, US-031, US-032, US-033, US-034 (Batch Verification)
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: Verified all quote form features (already implemented in prior iteration)
- Files verified/committed:
  - apps/web/src/pages/QuoteFormPage.tsx (complete quote form with all features)
  - apps/web/src/pages/QuotePreviewPage.tsx (PDF preview page)
  - apps/web/src/pdf/QuotePdf.tsx (PDF template component)
  - apps/web/src/App.tsx (routes for /quotes/new, /quotes/:id, /quotes/:id/preview)
  - apps/api/src/index.ts (CORS config updated for multiple dev ports)
- US-029: Quote form basic info - client dropdown, title, description, validUntil date picker, notes
- US-030: Quote items section - From Product dialog, Manual Entry button, editable fields, remove button
- US-031: Quote totals - auto-calculated subtotal, labor cost, discount, manual total override
- US-032: Status management - status dropdown with immediate API update on change
- US-033: QuotePdf component with header, client info, items table, totals, notes sections
- US-034: PDF Preview button, QuotePreviewPage with PDFViewer, Download with correct filename
- **Learnings for future iterations:**
  - All quote form features share same QuoteFormPage component with isEditing flag
  - useForm from react-hook-form with zodResolver for form validation
  - Items managed in local state (items array), not in form
  - Totals calculated in real-time (subtotal, calculatedTotal, finalTotal)
  - Status change uses handleStatusChange for immediate API call
  - @react-pdf/renderer uses PDFViewer for in-browser preview and pdf().toBlob() for download
  - CORS should use array of origins for multiple dev server ports
---

## 2026-01-16 - US-035
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: Dashboard with metrics, recent quotes, and quick actions
- Files changed:
  - apps/api/src/routes/dashboard.ts (new - dashboard API endpoints)
  - apps/api/src/index.ts (added dashboard routes)
  - apps/web/src/pages/DashboardPage.tsx (new - full dashboard component)
  - apps/web/src/App.tsx (replaced inline Dashboard with DashboardPage import)
- Features implemented:
  - GET /api/dashboard/metrics - returns totalClients, totalProducts, totalMaterials, pendingQuotes, approvedQuotes
  - GET /api/dashboard/recent-quotes - returns last 5 quotes with client info
  - 5 metric cards with icons (Users, Package, Boxes, Clock, CheckCircle from lucide-react)
  - Recent Quotes section with status badges and View All Quotes button
  - Quick Actions: New Client, New Product, New Quote buttons
- **Learnings for future iterations:**
  - Use Promise.all for parallel API calls in dashboard (metrics + recent quotes)
  - Dashboard metrics endpoint uses multiple prisma.count() calls in Promise.all
  - Recent quotes uses orderBy: { createdAt: 'desc' } with take: 5 for last 5 items
  - Reuse STATUS_BADGE_STYLES and STATUS_LABELS from QuotesPage pattern for consistency
  - Dashboard layout uses CSS grid with md:grid-cols-2 and lg:grid-cols-5 for responsive design
---

## 2026-01-16 - US-036
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- What was implemented: Low stock alerts on dashboard with sidebar indicators and filtered lists
- Files changed:
  - apps/api/src/routes/dashboard.ts (added /low-stock endpoint)
  - apps/web/src/contexts/LowStockContext.tsx (new - context for sharing low stock state)
  - apps/web/src/pages/DashboardPage.tsx (added Low Stock Alerts section)
  - apps/web/src/components/Layout.tsx (added alert icons on sidebar nav items)
  - apps/web/src/pages/ProductsPage.tsx (added lowStock filter support)
  - apps/web/src/pages/MaterialsPage.tsx (added lowStock filter support)
  - apps/web/src/App.tsx (wrapped with LowStockProvider)
- Features implemented:
  - GET /api/dashboard/low-stock - returns products/materials where quantity < minStock
  - Low Stock Alerts card with amber styling (border-amber-200 bg-amber-50)
  - Alert icon (AlertTriangle) on sidebar for Products/Materials when low stock exists
  - "View all low stock products/materials â†’" links to filtered lists
  - ?lowStock=true query param on Products/Materials pages with clear filter button
- **Learnings for future iterations:**
  - Prisma doesn't support comparing two fields in where clause; fetch all and filter in code
  - Use Context to share low stock state between Dashboard and Layout components
  - LowStockProvider must be inside AuthProvider (needs user state for API calls)
  - Filter banners use amber color scheme for consistency with low stock alerts
  - useSearchParams hook for URL query param state management
  - Alert icons added with ml-auto class to push them to the right side of nav items
---
