# Ralph Progress Log
Started: Sex 16 Jan 2026 00:29:35 -03

## Codebase Patterns
- Prisma 7 requires DATABASE_URL in prisma.config.ts, NOT in schema.prisma
- Use `npm run db:migrate -w @artisan/api` to run migrations (requires Docker PostgreSQL running)
- Generated Prisma client goes to node_modules/@prisma/client
- API runs on port 3001, Web will run on port 5173
- Pages go in apps/web/src/pages/ directory
- Use react-hook-form + zod for form validation with Shadcn form components
- API URL is http://localhost:3001/api
- Token and user stored in localStorage after auth

---

## 2026-01-16 08:45 - US-010
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- Implemented: Login and registration pages with form validation
- Files changed:
  - apps/web/src/pages/LoginPage.tsx (new - login form with email/password)
  - apps/web/src/pages/RegisterPage.tsx (new - registration form with name/email/password/businessName)
  - apps/web/src/App.tsx (added /login and /register routes)
  - .claude/ralph/prd.json (marked US-005 through US-010 as passes: true)
- **Learnings for future iterations:**
  - Shadcn form components use react-hook-form Controller pattern via FormField
  - Use zodResolver from @hookform/resolvers for form schema validation
  - API returns { user, token } on successful auth
  - Store token in localStorage and redirect to / on success
  - Login page can display server errors via useState error state
---

## 2026-01-16 03:38 - US-004
Thread: https://ampcode.com/threads/$AMP_CURRENT_THREAD_ID
- Implemented: Prisma ORM with complete database schema
- Files changed:
  - apps/api/package.json (added Prisma dependencies and db scripts)
  - apps/api/prisma/schema.prisma (complete schema with all models)
  - apps/api/prisma.config.ts (Prisma 7 config)
  - apps/api/.env (DATABASE_URL)
  - apps/api/.env.example (template for DATABASE_URL)
  - apps/api/.gitignore (exclude .env and generated Prisma)
- **Learnings for future iterations:**
  - Prisma 7 moved datasource URL from schema.prisma to prisma.config.ts
  - Docker Desktop on macOS can be unstable - be prepared for long image pulls
  - `prisma generate` works without database, `prisma migrate dev` requires running DB
  - Schema includes: User, Client, Category, Product, ProductMaterial, Material, Quote, QuoteItem
  - Enums: CategoryType (PRODUCT, MATERIAL), QuoteStatus (DRAFT, SENT, APPROVED, REJECTED, COMPLETED)
---
